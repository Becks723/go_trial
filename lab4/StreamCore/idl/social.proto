// idl/like.proto
syntax = "proto3";

package social;

option go_package = "StreamCore/idl/social;social";

import "api.proto";
import "common.proto";

message SocialList {
  repeated common.SocialUserInfo items = 1;
  int32 total = 2;
}

message FollowReq {
  string to_user_id = 1[(api.form)="to_user_id"];
  int32 action_type = 2[(api.form)="action_type"];
}

message FollowResp {
  common.RespStatus base = 1;
}

message ListFollowsQuery {
  string user_id = 1[(api.query)="user_id"];
  int32 page_size = 2[(api.query)="page_size"];
  int32 page_num = 3[(api.query)="page_num"];
}

message ListFollowsResp {
  common.RespStatus base = 1;
  SocialList data = 2;
}

message ListFollowersQuery {
  string user_id = 1[(api.query)="user_id"];
  int32 page_size = 2[(api.query)="page_size"];
  int32 page_num = 3[(api.query)="page_num"];
}

message ListFollowersResp {
  common.RespStatus base = 1;
  SocialList data = 2;
}

message ListFriendsQuery {
  int32 page_size = 1[(api.query)="page_size"];
  int32 page_num = 2[(api.query)="page_num"];
}

message ListFriendsResp {
  common.RespStatus base = 1;
  SocialList data = 2;
}

service SocialService {
  rpc Follow(FollowReq) returns (FollowResp) {
    option (api.post)="/relation/action";
  }
  rpc ListFollows(ListFollowsQuery) returns (ListFollowsResp) {
    option (api.get)="/following/list";
  }
  rpc ListFollowers(ListFollowersQuery) returns (ListFollowersResp) {
    option (api.get)="/follower/list";
  }
  rpc ListFriends(ListFriendsQuery) returns (ListFriendsResp) {
    option (api.get)="/friends/list";
  }
}